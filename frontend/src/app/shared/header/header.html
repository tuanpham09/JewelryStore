<!-- Main Header -->
<div class="main-header">
    <div class="header-content">
        <!-- Back button (optional) -->
        <button *ngIf="showBackButton" mat-button class="back-btn" (click)="goBack()">
            <mat-icon>arrow_back</mat-icon>
            <span>{{ backButtonText }}</span>
        </button>

        <!-- Logo -->
        <div class="logo-section">
            <a class="brand-logo" (click)="navigateToHome()">
                <mat-icon class="logo-icon">diamond</mat-icon>
                <span class="logo-text">G5 JEWELRY</span>
            </a>
        </div>

        <!-- Search Bar -->
        <div class="search-section">
            <div class="search-bar">
                <div class="search-input-wrapper">
                    <input 
                        type="text" 
                        class="search-input" 
                        [(ngModel)]="searchKeyword"
                        (input)="onSearchInput()"
                        (focus)="showSuggestions = true"
                        (blur)="hideSuggestions()"
                        placeholder="I'm looking for..."
                    >
                    <button class="search-btn" (click)="performSearch()" [disabled]="isSearching">
                        <mat-icon *ngIf="!isSearching">search</mat-icon>
                        <span *ngIf="isSearching" class="loading-spinner">⟳</span>
                    </button>
                </div>
                
                <!-- Search Suggestions -->
                <div class="search-suggestions" *ngIf="showSuggestions && searchSuggestions.length > 0">
                    <div 
                        class="suggestion-item" 
                        *ngFor="let suggestion of searchSuggestions"
                        (click)="selectSuggestion(suggestion)"
                    >
                        <mat-icon>search</mat-icon>
                        <span>{{ suggestion }}</span>
                    </div>
                </div>
            </div>
            
            <!-- Quick Search Tags -->
            <div class="quick-search-tags" *ngIf="showSuggestions">
                <span class="tags-label">Tìm kiếm nhanh:</span>
                <button 
                    class="tag-btn" 
                    *ngFor="let tag of quickSearchTags"
                    (click)="searchByTag(tag)"
                >
                    {{ tag }}
                </button>
            </div>
        </div>

        <!-- Right Actions -->
        <div class="nav-right">
            <!-- User Account -->
            <button mat-icon-button class="action-icon user-icon" *ngIf="currentUser; else notLoggedIn"
                [matMenuTriggerFor]="userMenu">
                <mat-icon>person_outline</mat-icon>
            </button>
            <ng-template #notLoggedIn>
                <button mat-icon-button class="action-icon user-icon" (click)="navigateToLogin()">
                    <mat-icon>person_outline</mat-icon>
                </button>
            </ng-template>

            <!-- Wishlist -->
            <button mat-icon-button class="action-icon wishlist-icon" (click)="navigateToWishlist()">
                <mat-icon>favorite_border</mat-icon>
                <span class="badge" *ngIf="wishlistCount > 0">{{ wishlistCount }}</span>
            </button>

            <!-- Cart -->
            <button mat-icon-button class="action-icon cart-icon" (click)="navigateToCart()">
                <mat-icon>shopping_cart</mat-icon>
                <span class="badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
            </button>
        </div>
    </div>
</div>

<!-- Secondary Navigation -->
<!-- <div class="secondary-nav">
    <div class="nav-content">
        <div class="nav-links">
            <a class="nav-link" routerLink="/home" routerLinkActive="active">Home Maia</a>
            <a class="nav-link" routerLink="/shop" routerLinkActive="active">Shop</a>
            <a class="nav-link" routerLink="/pages" routerLinkActive="active">Pages</a>
            <a class="nav-link" routerLink="/blogs" routerLinkActive="active">Blogs</a>
            <a class="nav-link" routerLink="/contact" routerLinkActive="active">Contact Us</a>
        </div>
        <div class="nav-features">
            <a class="feature-link hot" routerLink="/hot">
                <mat-icon>whatshot</mat-icon>
                Hot
            </a>
            <a class="feature-link sale" routerLink="/sale">
                <mat-icon>local_offer</mat-icon>
                Sale
            </a>
            <div class="recently-viewed" (click)="toggleRecentlyViewed()">
                Recently Viewed
                <mat-icon>expand_more</mat-icon>
            </div>
        </div>
    </div>
</div> -->

<!-- User Dropdown Menu -->
<mat-menu #userMenu="matMenu" class="user-dropdown-menu">
    <div class="user-menu-header">
        <div class="user-info">
            <div class="user-avatar-large">
                {{ getInitials() }}
            </div>
            <div class="user-details">
                <h4 class="user-name">{{ currentUser?.fullName || 'Người dùng' }}</h4>
                <p class="user-email">{{ currentUser?.email || 'user@example.com' }}</p>
            </div>
        </div>
    </div>

    <mat-divider></mat-divider>

    <button mat-menu-item (click)="navigateToProfile()" class="menu-item">
        <mat-icon>person</mat-icon>
        <span>Trang cá nhân</span>
    </button>

    <button mat-menu-item (click)="navigateToOrderHistory()" class="menu-item">
        <mat-icon>history</mat-icon>
        <span>Lịch sử đơn hàng</span>
    </button>

    <button mat-menu-item (click)="navigateToWishlist()" class="menu-item">
        <mat-icon>favorite</mat-icon>
        <span>Danh sách yêu thích</span>
    </button>

    <button mat-menu-item (click)="navigateToCart()" class="menu-item">
        <mat-icon>shopping_bag</mat-icon>
        <span>Giỏ hàng</span>
        <span class="menu-badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
    </button>

    <button mat-menu-item (click)="navigateToAdmin()" class="menu-item" *ngIf="isAdmin()">
        <mat-icon>admin_panel_settings</mat-icon>
        <span>Quản trị</span>
    </button>

    <mat-divider></mat-divider>

    <button mat-menu-item (click)="logout()" class="menu-item logout-item">
        <mat-icon>logout</mat-icon>
        <span>Đăng xuất</span>
    </button>
</mat-menu>